{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: 'AdminLogin',\n  data() {\n    return {\n      username: '',\n      password: '',\n      loading: false,\n      errorMessage: '',\n      backendPort: 'http://212.192.127.152:9000'\n    };\n  },\n  methods: {\n    async login() {\n      if (!this.username || !this.password) {\n        this.errorMessage = 'Пожалуйста, заполните все поля';\n        return;\n      }\n      if (this.username.length < 3 || this.username.length > 50) {\n        this.errorMessage = 'Логин должен содержать от 3 до 50 символов';\n        return;\n      }\n      if (this.password.length < 8) {\n        this.errorMessage = 'Пароль должен содержать минимум 8 символов';\n        return;\n      }\n      const usernameRegex = /^[a-zA-Z0-9_]+$/;\n      if (!usernameRegex.test(this.username)) {\n        this.errorMessage = 'Логин содержит недопустимые символы';\n        return;\n      }\n      this.loading = true;\n      this.errorMessage = '';\n      try {\n        const response = await axios.post(\"http://212.192.127.152:9000/user/\", {\n          login: this.username,\n          password: this.password\n        }, {\n          withCredentials: true,\n          timeout: 10000,\n          headers: {\n            'Content-Type': 'application/json',\n            'X-Requested-With': 'XMLHttpRequest'\n          }\n        });\n        if (!response.data || typeof response.data !== 'object') {\n          throw new Error('Некорректный формат ответа сервера');\n        }\n        console.log(response.data.token);\n        if (response.data.token) {\n          localStorage.setItem('authToken', response.data.token);\n          this.username = '';\n          this.password = '';\n          await this.$router.push('/admin');\n        } else {\n          this.errorMessage = response.data.message || 'Ошибка аутентификации: токен не получен';\n        }\n      } catch (error) {\n        if (error.response) {\n          const status = error.response.status;\n          const message = error.response.data?.message || 'Произошла ошибка на сервере';\n          switch (status) {\n            case 400:\n              this.errorMessage = 'Некорректный запрос. Проверьте данные и попробуйте снова';\n              break;\n            case 401:\n              this.errorMessage = 'Неверный логин или пароль';\n              break;\n            case 403:\n              this.errorMessage = 'Доступ запрещен';\n              break;\n            case 429:\n              this.errorMessage = 'Слишком много попыток. Пожалуйста, подождите 5 минут';\n              break;\n            case 500:\n              this.errorMessage = 'Внутренняя ошибка сервера. Попробуйте позже';\n              break;\n            default:\n              this.errorMessage = message;\n          }\n        } else if (error.request) {\n          this.errorMessage = 'Сервер недоступен. Проверьте подключение к интернету';\n        } else if (error.code === 'ECONNABORTED') {\n          this.errorMessage = 'Время ожидания истекло. Попробуйте снова';\n        } else {\n          this.errorMessage = 'Произошла неизвестная ошибка. Пожалуйста, попробуйте снова';\n        }\n\n        // Логирование ошибки для отладки\n        console.error('Ошибка входа:', {\n          message: error.message,\n          code: error.code,\n          response: error.response ? {\n            status: error.response.status,\n            data: error.response.data\n          } : null\n        });\n      } finally {\n        // Сброс состояния загрузки и поля пароля\n        this.loading = false;\n        this.password = ''; // Сбрасываем пароль для безопасности\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","username","password","loading","errorMessage","backendPort","methods","login","length","usernameRegex","test","response","post","withCredentials","timeout","headers","Error","console","log","token","localStorage","setItem","$router","push","message","error","status","request","code"],"sources":["C:\\Users\\Zemek\\OneDrive\\Desktop\\IP_Belkin_final_stage\\frontend\\src\\components\\AdminLogin.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin-login\">\r\n    <h1>Вход в админ-панель</h1>\r\n    <div class=\"login-form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"username\">Логин</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"username\"\r\n          v-model=\"username\"\r\n          placeholder=\"Введите логин\"\r\n          @keyup.enter=\"login\"\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"password\">Пароль</label>\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          v-model=\"password\"\r\n          placeholder=\"Введите пароль\"\r\n          @keyup.enter=\"login\"\r\n        />\r\n      </div>\r\n      <button @click=\"login\" :disabled=\"loading\">\r\n        {{ loading ? 'Вход...' : 'Войти' }}\r\n      </button>\r\n      <p v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AdminLogin',\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      loading: false,\r\n      errorMessage: '',\r\n      backendPort: 'http://212.192.127.152:9000'\r\n    };\r\n  },\r\n    methods: {\r\n    async login() {\r\n      \r\n      if (!this.username || !this.password) {\r\n        this.errorMessage = 'Пожалуйста, заполните все поля';\r\n        return;\r\n      }\r\n\r\n      \r\n      if (this.username.length < 3 || this.username.length > 50) {\r\n        this.errorMessage = 'Логин должен содержать от 3 до 50 символов';\r\n        return;\r\n      }\r\n      if (this.password.length < 8) {\r\n        this.errorMessage = 'Пароль должен содержать минимум 8 символов';\r\n        return;\r\n      }\r\n      \r\n      const usernameRegex = /^[a-zA-Z0-9_]+$/;\r\n      if (!usernameRegex.test(this.username)) {\r\n        this.errorMessage = 'Логин содержит недопустимые символы';\r\n        return;\r\n      }\r\n\r\n      \r\n      this.loading = true;\r\n      this.errorMessage = '';\r\n\r\n      try {\r\n        \r\n        const response = await axios.post(\r\n          \"http://212.192.127.152:9000/user/\", \r\n          {\r\n            login: this.username,\r\n            password: this.password\r\n          },\r\n          {\r\n            withCredentials: true,\r\n            timeout: 10000, \r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'X-Requested-With': 'XMLHttpRequest' \r\n            }\r\n          }\r\n        );\r\n\r\n        \r\n        if (!response.data || typeof response.data !== 'object') {\r\n          throw new Error('Некорректный формат ответа сервера');\r\n        }\r\n\r\n        console.log(response.data.token);\r\n        if (response.data.token) {\r\n          \r\n          localStorage.setItem('authToken', response.data.token);\r\n\r\n          \r\n          this.username = '';\r\n          this.password = '';\r\n\r\n          \r\n          await this.$router.push('/admin');\r\n        } else {\r\n          \r\n          this.errorMessage = response.data.message || 'Ошибка аутентификации: токен не получен';\r\n        }\r\n      } catch (error) {\r\n        \r\n        if (error.response) {\r\n          \r\n          const status = error.response.status;\r\n          const message = error.response.data?.message || 'Произошла ошибка на сервере';\r\n\r\n          switch (status) {\r\n            case 400:\r\n              this.errorMessage = 'Некорректный запрос. Проверьте данные и попробуйте снова';\r\n              break;\r\n            case 401:\r\n              this.errorMessage = 'Неверный логин или пароль';\r\n              break;\r\n            case 403:\r\n              this.errorMessage = 'Доступ запрещен';\r\n              break;\r\n            case 429:\r\n              this.errorMessage = 'Слишком много попыток. Пожалуйста, подождите 5 минут';\r\n              break;\r\n            case 500:\r\n              this.errorMessage = 'Внутренняя ошибка сервера. Попробуйте позже';\r\n              break;\r\n            default:\r\n              this.errorMessage = message;\r\n          }\r\n        } else if (error.request) {\r\n          \r\n          this.errorMessage = 'Сервер недоступен. Проверьте подключение к интернету';\r\n        } else if (error.code === 'ECONNABORTED') {\r\n          \r\n          this.errorMessage = 'Время ожидания истекло. Попробуйте снова';\r\n        } else {\r\n          \r\n          this.errorMessage = 'Произошла неизвестная ошибка. Пожалуйста, попробуйте снова';\r\n        }\r\n\r\n        // Логирование ошибки для отладки\r\n        console.error('Ошибка входа:', {\r\n          message: error.message,\r\n          code: error.code,\r\n          response: error.response ? {\r\n            status: error.response.status,\r\n            data: error.response.data\r\n          } : null\r\n        });\r\n      } finally {\r\n        // Сброс состояния загрузки и поля пароля\r\n        this.loading = false;\r\n        this.password = ''; // Сбрасываем пароль для безопасности\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.admin-login {\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #f5f7fa;\r\n  font-family: 'Nekst', sans-serif;\r\n  padding: 2rem;\r\n}\r\n\r\nh1 {\r\n  font-family: 'Nekst-SemiBold', sans-serif;\r\n  font-size: clamp(2rem, 3.5vw, 4rem);\r\n  color: #1a202c;\r\n  margin-bottom: 3vh;\r\n}\r\n\r\n.login-form {\r\n  width: 100%;\r\n  max-width: 400px;\r\n  background-color: #fff;\r\n  padding: 2rem;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  font-family: 'Nekst-Medium', sans-serif;\r\n  font-size: clamp(1rem, 1.2vw, 1.2rem);\r\n  color: #4a5568;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\ninput {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 5px;\r\n  font-family: 'Nekst-Light', sans-serif;\r\n  font-size: clamp(1rem, 1.2vw, 1.2rem);\r\n  color: #1a202c;\r\n  outline: none;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\ninput:focus {\r\n  border-color: #5552e8;\r\n}\r\n\r\nbutton {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  background-color: #5552e8;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-family: 'Nekst-Medium', sans-serif;\r\n  font-size: clamp(1rem, 1.2vw, 1.2rem);\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\nbutton:disabled {\r\n  background-color: #a0a0a0;\r\n  cursor: not-allowed;\r\n}\r\n\r\nbutton:hover:not(:disabled) {\r\n  background-color: #4542c8;\r\n}\r\n\r\n.error {\r\n  color: #e53e3e;\r\n  font-family: 'Nekst-Light', sans-serif;\r\n  font-size: clamp(0.9rem, 1vw, 1rem);\r\n  margin-top: 1rem;\r\n  text-align: center;\r\n}\r\n\r\n/* Адаптивность для мобильных устройств */\r\n@media (max-width: 768px) {\r\n  .admin-login {\r\n    padding: 1rem;\r\n  }\r\n\r\n  h1 {\r\n    font-size: clamp(1.5rem, 5vw, 2rem);\r\n  }\r\n\r\n  .login-form {\r\n    padding: 1.5rem;\r\n  }\r\n\r\n  input,\r\n  button {\r\n    font-size: clamp(0.9rem, 3vw, 1rem);\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}